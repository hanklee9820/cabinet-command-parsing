<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>协议解析测试工具</title><script src="protocol-parser.js"></script><style>body{font-family:system-ui,-apple-system,'Segoe UI',Roboto,sans-serif;line-height:1.5;padding:20px;max-width:1200px;margin:0 auto;background-color:#f0f0f0}h1{color:#06c}.test-case{background-color:#fff;border-radius:8px;padding:15px;margin-bottom:15px;box-shadow:0 2px 5px rgba(0,0,0,.1)}.test-input{font-family:monospace;background-color:#f5f5f5;padding:10px;border-radius:4px;margin-bottom:10px}.test-result{background-color:#f8f8f8;padding:10px;border-radius:4px;margin-top:10px;border-left:4px solid #06c;overflow-x:auto}.test-result pre{margin:0;white-space:pre-wrap}.success{border-left-color:#4caf50}.error{border-left-color:#f44336}button{background-color:#06c;color:#fff;border:none;padding:8px 15px;border-radius:4px;cursor:pointer;margin-right:10px}button:hover{background-color:#004c99}.test-controls{margin-bottom:20px}</style></head><body><h1>智能医疗柜协议解析测试工具</h1><div class="test-controls"><button id="run-all">运行所有测试</button> <button id="clear-results">清除结果</button></div><div id="test-cases"></div><script>let testCases=[{name:"测试门锁开门命令",input:"F3 00 08 11 11 01 00 00 00 01 08",description:"门锁控制器 - 开门操作（发送指令）"},{name:"测试门锁开门返回",input:"F3 00 09 11 11 01 00 00 00 01 01 08",description:"门锁控制器 - 开门操作（返回数据）"},{name:"测试门锁状态查询命令",input:"F3 00 08 11 10 01 00 00 00 01 09",description:"门锁控制器 - 查询锁状态（发送指令）"},{name:"测试门锁状态查询返回",input:"F3 00 09 11 10 01 00 00 00 02 01 0A",description:"门锁控制器 - 查询锁状态（返回数据）"},{name:"测试读取重量命令",input:"01 05 02 05 0D",description:"重力传感器 - 读传感器重量（发送指令）"},{name:"测试读取重量返回",input:"01 06 02 42 03 00 02 77 C7",description:"重力传感器 - 读传感器重量（返回数据）"},{name:"测试去皮置零命令",input:"00 63 06 01 6A",description:"重力传感器 - 去皮置零/校准（发送指令）"},{name:"测试去皮置零返回",input:"01 64 06 05 70",description:"重力传感器 - 去皮置零/校准（返回数据）"},{name:"测试设置鉴别率命令",input:"01 63 2E 05 97",description:"重力传感器 - 设置鉴别率（发送指令）"},{name:"测试设置鉴别率返回",input:"01 64 2E 05 98",description:"重力传感器 - 设置鉴别率（返回数据）"},{name:"测试读取鉴别率命令",input:"01 05 2E 05 39",description:"重力传感器 - 读取鉴别率（发送指令）"},{name:"测试读取鉴别率返回",input:"01 06 2E 05 3A",description:"重力传感器 - 读取鉴别率（返回数据）"}],testCasesContainer=document.getElementById("test-cases");function runTest(t){var e=testCases[t],t=document.getElementById("result-"+t),s=t.querySelector("pre");try{var n=window.ProtocolParser.parse(e.input);s.textContent=JSON.stringify(n,null,2),t.classList.remove("error"),t.classList.add("success")}catch(e){s.textContent=`解析错误: ${e.message}
`+e.stack,t.classList.remove("success"),t.classList.add("error")}t.style.display="block"}testCases.forEach((e,t)=>{var s=document.createElement("div");s.className="test-case",s.innerHTML=`
                <h3>${e.name}</h3>
                <p>${e.description}</p>
                <div class="test-input">${e.input}</div>
                <button class="run-test" data-index="${t}">运行测试</button>
                <div class="test-result" id="result-${t}" style="display:none;">
                    <pre></pre>
                </div>
            `,testCasesContainer.appendChild(s)}),document.querySelectorAll(".run-test").forEach(e=>{e.addEventListener("click",function(){runTest(this.getAttribute("data-index"))})}),document.getElementById("run-all").addEventListener("click",function(){testCases.forEach((e,t)=>{runTest(t)})}),document.getElementById("clear-results").addEventListener("click",function(){document.querySelectorAll(".test-result").forEach(e=>{e.style.display="none",e.classList.remove("success","error"),e.querySelector("pre").textContent=""})})</script></body></html>